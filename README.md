# Cash Keeper #

### Описание ###

Приложение позволяет создавать счета, пополнять, снимать деньги и совершать переводы между счетами.

Модель данных:
- Account (счет)
- Currency (валюта)
- Operation (операция)
- OperationType (тип операции)

У сущности Account хранится общий баланс по счету, который пересчитывается при совершении операции пополнения снятия или перевода. Это сделано для того, чтобы не пересчитывать баланс, при каждом его запросе. При обновлении баланса производится пессимистичная блокировка (LockModeType.PESSIMISTIC_WRITE) для решения проблемы состояния гонок и несогласованности данных при read-modify-write, без повышения уровня изоляции транзакции.

Также написан интеграционный тест, для проверки создания счета, пополнения и получения счета с корректным балансом.

### Сборка и запуск ###

Сборка и запуск исполняемого jar:

    mvn package && java -jar target/cash-keeper-1.0.0-SNAPSHOT.jar

После запуска, приложение доступно по адресу:

    http://localhost:8080/

### REST API ###

Тип запроса               | Url              		     | Описание
--------------------------|------------------------------|--------------------------
POST                      | /api/account                 | Создание счета. Аргументы fio (ФИО) и currency (Валюта, значения: RUB, USD, EUR).
GET                       | /api/accounts                | Получение списка счетов.
GET                       | /api/operations/{accountId}  | Получение операций по счету. Аргумент accountId (идентификатор счета).
POST                      | /api/income                  | Пополнение счета. Аргументы accountId (идентификатор счета) и amount (сумма пополнения).
POST                      | /api/expense                 | Снятие со счета. Аргументы accountId (идентификатор счета) и amount (сумма списания).
POST                      | /api/transfer                | Перевод со счета на счет. Аргументы accountIdFrom (идентификатор счета списания), accountIdTo (идентификатор счета пополнения) и amount (сумма перевода).
